# 色彩科学（Color Science）

## Gamma

### OETF 和 EOTF

近似地，

-   相机传感器读出电压与输入光功率成 1 次方关系。
-   CRT 显示器的输出功率与输入电压成 2.5 次方关系。
-   LCD 显示器的输出功率与输入电压成 1 次方关系。

为了还原拍摄的画面，我们应当让输出光功率和输入光功率相等。
对于早期的 CRT 时代，为了降低成本，都是预先在摄影机上将接受到的光通过近似于 1/2.5 次方输出，这样 CRT 显示器就可以直接观看。（实际上这个值大多是 2.2，考虑到电视多在暗处观看）这一现象一直保留到现在。

### 人眼亮度感知

然而人眼在更亮的时候对亮度更加不敏感，因此在存储亮度时，如果精细程度是固定的，我们更应当将精细程度分配到暗部。这时相机上继续使用 Gamma 1/2.2 曲线存储便是一个不错的选择。请注意在这一情况下，如果使用 0~255 表示亮度，那么 0~1 和 254~255 之间的功率差是不一致的。

## 色彩空间

色彩空间用以描述颜色在实际光学中的范围。
理论上色彩空间应当搭配其对应的 Gamma 曲线使用，例如 Sgamut3.Cine 色彩空间搭配 SLog3 使用。

## LUT

LUT（Look Up Table），颜色查找表，用于将一组 R、G、B 数据转换为另一组 R、G、B 数据。这种对应关系可以被保存成文件，目前一般采用 .cube 为后缀的 3D LUT。由于 $256^3\times 3=50,331,648$ 字节（约50MB）这仅仅是 8bit LUT，因此将每个 RGB 值的对应关系均写入 LUT 是不经济的。我们一般将 256 档的 RGB 值量化至为 17 档（或33、65，精度更高），后保存，其他数值通过插值计算。  
两组色彩空间和 Gamma 曲线可以通过 LUT 进行转换。  

在使用 Davinci Resolve 时不推荐使用 LUT 进行色彩空间转换。  

## 白平衡

此问题的本质是人眼可以自动地将环境中的光源（如果它近似是白色的话）认定为白色的基准。但实际上它可能是偏色的，但我们不知道观看者的观看环境光源，因此我们让相机进行前期处理，将环境光颜色定义为标准的白色，显示设备的白平衡由显示设备控制（固定为背光颜色、可设置、或例如 True Tone 的自动调节）。

白平衡一般分为两个维度，即色温和色调。理论上应当与环境光线匹配。  

多设备拍摄时，无论是否准确，都务必让所有设备保持在相同的白平衡设置。  

在有独立白平衡传感器的设备上，自动白平衡较为准确，否则请勿过分相信自动白平衡。